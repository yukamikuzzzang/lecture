ls -l /etc/passwd
ls -l /usr/bin/passwd

-rws-xr-x./usr/bin/passwd
s = set userid

passwd
root 비밀번호를 바꾸는 법

ls -l /etc/passwd
소유자가 root
pis56은 해당 파일을 읽을 수 있어야함.(일반유저,other)

cat /etc/passwd
확인하고 삭제해야되..

find / -user root -perm -4000 -type f
전체 루트 디렉토리에서 찾는다.
루트 디렉토리에서
허가해준다는 의미


find / -user root -perm -4000 -type f | more
(관리자라면 setuserid가 부여된 파일의 개수를 알아야할 필요가 있다.

이 친구들은 모두 setuserid가 적용되어있음.
예전엔 다 됬었는데..

ls -l /bin/su
ls -l /bin/login
ls -l /bin/ping
ls -l /bin/mount
ls -l /bin/sudo
빨간색으로 표시된 것들은 setuserid가 적용되어있는 것.
(/bin/ping이 사라졌다고..)
이 개수가 몇 개인지를 알아야할 필요가 있음.

find / -user root -perm -400 -type f > setuid.txt
'>'
파일로써 결과를 저장

cat setuid.txt | wc
wc setuid.txt
(word count)

저 파일과 새로운 파일을 비교하는 것이 있다고 한다.(수업기준 31개)

mkdir test
ls
cd test
pwd (/root/test)

touch 1.sh
ls -l /etc/p* > etc.txt // /etc 밑에 p로 시작하는 것들을 파일로 저장

.sh = shell programing
실행파일로 만들 수 있음.

chmod 755 1.sh (x권한 부여)
타인은 자기 파일로써 실행할 수는 없음.

chmod 4755 1.sh
setuserid> 앞에 4로 시작.
rw's'

setuserid 해제하는 방법

chmod 755 1.sh (풀어짐.)
실행파일은 초록색으로 바뀜.

setuid chmod 4000파일
setgid chmod 2000파일

chmod 2755 1.sh
-rwxr-sr-x

touch 1.cfg
ls -l

1.cfg > 공유파일로 만들고파
chmod 1777 1.cfg
-rwxrwxrwt 삭제와 수정은 올린이만 가능. 그러나 모두가 볼 수 있음.

1,2,4.. 관리자로서 이런 것들을 검색해야한다고..

Sticky bit
대부분 /tmp 디렉토리에 설정
흔한 용도는 공용디렉토리로 사용하기 위한 것.

모든 사용자가 write 가능
삭제는 안됨.

chmod 1000 파일/디렉토리

setuid, setgid
개수를 알아두었다가 수시로 지워두자.
해커들이 setuid, setgid등을 숨겨놓고 도망간다고 함.
윈도우... 보안관련 파일 하나만 지우면 다 사라짐..
리눅스는 그 자취들을 하나하나 모두 지워주어야한다고..

setuid ..> 00s 000 000
setgid ..>  000 00s 000
sticky bit ...>000 000 00t

su 명령어 제한하기[1/2]
서버관리자와 사용자가 따로있다면 지워주어야..


